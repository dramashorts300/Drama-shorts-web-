<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Meu Telegram Mini App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--tg-theme-button-color, #3390ec) 0%, var(--tg-theme-secondary-bg-color, #f0f0f0) 100%);
            border-radius: 15px;
            color: white;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .card {
            background-color: var(--tg-theme-secondary-bg-color, #f8f8f8);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .card h2 {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--tg-theme-text-color, #000000);
        }

        .button {
            width: 100%;
            padding: 15px;
            background-color: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 10px;
            transition: opacity 0.2s;
        }

        .button:active {
            opacity: 0.8;
        }

        .button.secondary {
            background-color: var(--tg-theme-secondary-bg-color, #e8e8e8);
            color: var(--tg-theme-text-color, #000000);
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--tg-theme-hint-color, #999999);
        }

        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--tg-theme-hint-color, #cccccc);
            border-radius: 8px;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            font-size: 16px;
            font-family: inherit;
        }

        .input-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .user-info {
            background-color: var(--tg-theme-bg-color, #ffffff);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .user-info p {
            margin-bottom: 8px;
            font-size: 14px;
        }

        .user-info strong {
            color: var(--tg-theme-link-color, #3390ec);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .feature-btn {
            padding: 20px;
            background-color: var(--tg-theme-secondary-bg-color, #f8f8f8);
            border: 2px solid var(--tg-theme-button-color, #3390ec);
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .feature-btn:active {
            transform: scale(0.95);
            background-color: var(--tg-theme-button-color, #3390ec);
            color: white;
        }

        .feature-btn span {
            display: block;
            font-size: 24px;
            margin-bottom: 8px;
        }

        .feature-btn p {
            font-size: 12px;
            font-weight: 500;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: var(--tg-theme-hint-color, #999999);
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Cabe√ßalho -->
        <div class="header">
            <h1>üéØ Meu Mini App</h1>
            <p>Bem-vindo ao seu aplicativo no Telegram!</p>
        </div>

        <!-- Informa√ß√µes do Usu√°rio -->
        <div class="card">
            <h2>üë§ Suas Informa√ß√µes</h2>
            <div class="user-info" id="userInfo">
                <p><strong>Nome:</strong> <span id="userName">Carregando...</span></p>
                <p><strong>Username:</strong> <span id="userUsername">Carregando...</span></p>
                <p><strong>ID:</strong> <span id="userId">Carregando...</span></p>
                <p><strong>Idioma:</strong> <span id="userLang">Carregando...</span></p>
            </div>
        </div>

        <!-- Funcionalidades -->
        <div class="card">
            <h2>‚ö° Funcionalidades</h2>
            <div class="feature-grid">
                <div class="feature-btn" onclick="showAlert()">
                    <span>üîî</span>
                    <p>Alerta</p>
                </div>
                <div class="feature-btn" onclick="showPopup()">
                    <span>üí¨</span>
                    <p>Popup</p>
                </div>
                <div class="feature-btn" onclick="expandApp()">
                    <span>üì±</span>
                    <p>Expandir</p>
                </div>
                <div class="feature-btn" onclick="vibrate()">
                    <span>üì≥</span>
                    <p>Vibrar</p>
                </div>
            </div>
        </div>

        <!-- Formul√°rio de Exemplo -->
        <div class="card">
            <h2>üìù Enviar Mensagem</h2>
            <div class="input-group">
                <label for="messageInput">Digite sua mensagem:</label>
                <textarea id="messageInput" placeholder="Escreva algo..."></textarea>
            </div>
            <button class="button" onclick="sendData()">Enviar para o Bot</button>
        </div>

        <!-- A√ß√µes -->
        <div class="card">
            <h2>üîó Links e A√ß√µes</h2>
            <button class="button secondary" onclick="openTelegramLink()">
                Abrir Canal do Telegram
            </button>
            <button class="button secondary" onclick="openExternalLink()">
                Abrir Link Externo
            </button>
            <button class="button secondary" onclick="shareApp()">
                Compartilhar App
            </button>
        </div>
    </div>

    <!-- SDK do Telegram -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <script>
        // Inicializar o Telegram Web App
        const tg = window.Telegram.WebApp;
        
        // Preparar o app
        tg.ready();
        
        // Expandir para tela cheia
        tg.expand();

        // Configurar o tema
        document.body.style.backgroundColor = tg.themeParams.bg_color || '#ffffff';
        document.body.style.color = tg.themeParams.text_color || '#000000';

        // Exibir informa√ß√µes do usu√°rio
        function displayUserInfo() {
            const user = tg.initDataUnsafe.user;
            
            if (user) {
                document.getElementById('userName').textContent = 
                    `${user.first_name || ''} ${user.last_name || ''}`.trim() || 'N√£o dispon√≠vel';
                document.getElementById('userUsername').textContent = 
                    user.username ? `@${user.username}` : 'N√£o definido';
                document.getElementById('userId').textContent = user.id || 'N√£o dispon√≠vel';
                document.getElementById('userLang').textContent = 
                    user.language_code?.toUpperCase() || 'N√£o dispon√≠vel';
            } else {
                document.getElementById('userName').textContent = 'Usu√°rio n√£o identificado';
                document.getElementById('userUsername').textContent = 'N/A';
                document.getElementById('userId').textContent = 'N/A';
                document.getElementById('userLang').textContent = 'N/A';
            }
        }

        // Configurar o bot√£o principal
        tg.MainButton.setText('Fechar App');
        tg.MainButton.onClick(function() {
            tg.close();
        });
        tg.MainButton.show();

        // Fun√ß√µes de intera√ß√£o

        function showAlert() {
            tg.showAlert('Este √© um alerta do Telegram! üéâ');
            tg.HapticFeedback.notificationOccurred('success');
        }

        function showPopup() {
            tg.showPopup({
                title: 'Popup Interativo',
                message: 'Escolha uma op√ß√£o abaixo:',
                buttons: [
                    {id: 'option1', type: 'default', text: 'Op√ß√£o 1'},
                    {id: 'option2', type: 'default', text: 'Op√ß√£o 2'},
                    {type: 'cancel'}
                ]
            }, function(buttonId) {
                if (buttonId === 'option1') {
                    tg.showAlert('Voc√™ escolheu a Op√ß√£o 1! ‚úÖ');
                } else if (buttonId === 'option2') {
                    tg.showAlert('Voc√™ escolheu a Op√ß√£o 2! ‚úÖ');
                }
            });
        }

        function expandApp() {
            if (tg.isExpanded) {
                tg.showAlert('O app j√° est√° expandido! üì±');
            } else {
                tg.expand();
                tg.showAlert('App expandido! üì±');
            }
        }

        function vibrate() {
            tg.HapticFeedback.impactOccurred('medium');
            tg.showAlert('Vibra√ß√£o ativada! üì≥');
        }

        function sendData() {
            const message = document.getElementById('messageInput').value;
            
            if (!message.trim()) {
                tg.showAlert('Por favor, digite uma mensagem primeiro!');
                return;
            }

            // Enviar dados para o bot
            tg.sendData(JSON.stringify({
                action: 'send_message',
                message: message,
                timestamp: new Date().toISOString()
            }));

            tg.showAlert('Mensagem enviada ao bot! ‚úâÔ∏è');
            document.getElementById('messageInput').value = '';
        }

        function openTelegramLink() {
            // Substitua pelo seu canal/grupo
            tg.openTelegramLink('https://t.me/telegram');
        }

        function openExternalLink() {
            tg.openLink('https://telegram.org');
        }

        function shareApp() {
            // Substitua pelo link do seu bot
            const botUsername = 'seu_bot_username';
            const shareUrl = `https://t.me/${botUsername}/app`;
            
            tg.showPopup({
                title: 'Compartilhar App',
                message: `Compartilhe este app com seus amigos!\n\n${shareUrl}`,
                buttons: [{type: 'close'}]
            });
        }

        // Monitorar mudan√ßas de tema
        tg.onEvent('themeChanged', function() {
            document.body.style.backgroundColor = tg.themeParams.bg_color;
            document.body.style.color = tg.themeParams.text_color;
        });

        // Monitorar mudan√ßas de viewport
        tg.onEvent('viewportChanged', function() {
            console.log('Viewport alterado:', {
                height: tg.viewportHeight,
                stableHeight: tg.viewportStableHeight,
                isExpanded: tg.isExpanded
            });
        });

        // Inicializar ao carregar
        window.addEventListener('load', function() {
            displayUserInfo();
            console.log('Telegram Mini App inicializado!');
            console.log('Dados de inicializa√ß√£o:', tg.initDataUnsafe);
        });
    </script>
</body>
</html>
